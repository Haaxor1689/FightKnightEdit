(this["webpackJsonpfight-knight-edit"]=this["webpackJsonpfight-knight-edit"]||[]).push([[0],{109:function(t,e,n){},123:function(t,e,n){"use strict";n.r(e);var a,i,r,c=n(0),o=n(26),s=n.n(o),u=n(8),l=n(151),d=n(154),b=n(152),p=function(){return Object(b.a)("(max-width:1366px)")?3:4},h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),j=function(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!==n&&(n.onstatechange=function(){var a,i;"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),null===e||void 0===e||null===(a=e.onUpdate)||void 0===a||a.call(e,t)):(console.log("Content is cached for offline use."),null===e||void 0===e||null===(i=e.onSuccess)||void 0===i||i.call(e,t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))},f=function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!==a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):j(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))},m=n(4),g=n(12),v=n(31),O=n(144),x=n.p+"static/media/sArrow_0.414d5640.png",y=n(58),k=n(9),w=n(19),_=(n(142),n.p+"static/media/sFist_new_5.7ffd7947.png"),S=function(t){return new Promise((function(e,n){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){var t,n;return e(null!==(t=null===(n=a.result.match(/;base64,(.*)/))||void 0===n?void 0:n[1])&&void 0!==t?t:"")},a.onerror=function(t){return n(t)}}))},C=function(t,e){var n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=e,a.click()},A=function(t,e){return function(t,e){return(Object(k.a)(Array(e).keys()).map((function(){return"0"})).join("")+t).slice(-e)}(t.toString(16),e).toUpperCase()},I=function(t){return parseInt("0x".concat(t))},F=function(t){return"".concat(function(t){return Object(w.b)(a||(a=Object(y.a)(["\n\t8% {\n\t\ttransform: translateX(",");\n\t}\n\t25% {\n\t\ttransform: translateX(",");\n\t}\n\t41% {\n\t\ttransform: translateX(",");\n\t}\n\t58% {\n\t\ttransform: translateX(",");\n\t}\n\t75% {\n\t\ttransform: translateX(",");\n\t}\n\t91% {\n\t\ttransform: translateX(",");\n\t}\n"])),t.spacing(2),t.spacing(-2),t.spacing(1),t.spacing(-1),t.spacing(.5),t.spacing(-.5))}(t)," 1s ease-in-out")},E=Object(w.b)(i||(i=Object(y.a)(["\n\t17% {\n\t\ttransform: scale(0.85);\n\t}\n\t33% {\n\t\ttransform: scale(1);\n\t}\n\t50% {\n\t\ttransform: scale(0.925);\n\t}\n\t66% {\n\t\ttransform: scale(1);\n\t}\n\t83% {\n\t\ttransform: scale(0.975);\n\t}\n"]))),G="".concat(E," 1s ease-in-out"),N={":hover::after,:focus-visible::after":{content:'""',position:"absolute",backgroundImage:"url(".concat(_,")"),backgroundSize:"cover",width:function(t){return t.spacing(119)},height:function(t){return t.spacing(296)},top:"50%",left:"50%",zIndex:1,transform:"translate(-100%, 2%) rotate(25deg)",pointerEvents:"none"}},z=[[240,241],[0,8],[8,16],[16,20],[20,24],[24,28],[28,32],[32,34],[34,36],[36,38],[38,40],[40,42],[42,44],[44,46],[46,48],[48,49],[49,50],[50,51],[51,52],[52,53],[53,54],[54,55],[55,56],[56,57],[57,58],[58,59],[59,60],[60,61]],B=function(t){var e=z.findIndex((function(e){return t>=e[0]&&t<e[1]}));return-1===e?15:e},M=n(74),T=n.p+"static/media/sFont_primary.1dbb1c01.png",H=n.p+"static/media/sFont_secondary.8fa0a812.png",R=n.p+"static/media/sFont_success.5b5014c5.png",D=n.p+"static/media/sFont_successHover.f443e114.png",W=n.p+"static/media/sFont_disabled.1756ca3c.png",q=n.p+"static/media/dither.f770c8f5.png",U=n(59),P=(n(109),n.p+"static/media/sOpening_17.aba4b902.png"),L=function(t){return Object(U.a)({palette:{primary:{main:"#fedd00"},secondary:{main:"#fe2300"},background:{default:"#2c0b32"},mode:"dark"},spacing:t,components:{MuiCssBaseline:{styleOverrides:{"*":{imageRendering:"pixelated",fontFamily:'"Nintendo DS BIOS", sans-serif'},body:{position:"relative"},"body:before":{content:'" "',position:"absolute",bottom:0,right:0,height:"100%",width:"100%",zIndex:-1,opacity:.2,backgroundImage:"url(".concat(P,")"),backgroundPosition:"bottom right",backgroundSize:"cover",filter:"blur(10px)",mixBlendMode:"hard-light"},"#root":{position:"relative",display:"flex",flexDirection:"column",minHeight:"100vh",overflowX:"hidden"}}}}})},K=n(1),X=["chars","sx"],J=["size","variant","uppercase","hasHover","children"],V={" ":[3,3],"!":[1,3],'"':[2,4],"'":[2,6],"(":[1,3],")":[1,3],",":[1,3],".":[1,3],"/":[1,2],1:[1,2],":":[1,3],";":[1,3],I:[0,2],T:[2,2],"[":[1,3],"]":[1,3],_:[2,2],"`":[2,2],i:[2,4],j:[3,2],k:[1,2],l:[1,3],t:[1,2],"|":[1,5]},Y={primary:T,secondary:H,success:R,disabled:W},$={primary:T,secondary:T,success:D,disabled:W},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{"--bitmap-url":"url(".concat(Y[t],")"),"--dither-url":"url(".concat(q,")"),":hover,:focus-visible":Object(m.a)(Object(m.a)({},e),{},{"--bitmap-url":"url(".concat($[t],")"),"--dither-url":"none"})}},Z=function(t){var e,n,a,i,r=t.char,c=t.variant,o=t.hasHover,s=r.charCodeAt(0)-32;return"\n"===r?Object(K.jsx)("br",{}):s<0||s>223?null:Object(K.jsx)(O.a,{component:"span",sx:Object(m.a)(Object(m.a)({},o?{}:{"--bitmap-url":"url(".concat(Y[c],")"),"--dither-url":"url(".concat(q,")")}),{},{position:"relative",display:"inline-block",width:function(t){return t.spacing(9)},height:function(t){return t.spacing(14)},whiteSpace:"pre",color:"transparent",textAlign:"center",pl:1,mb:-3,ml:-(null!==(e=null===(n=V[r])||void 0===n?void 0:n[0])&&void 0!==e?e:1),mr:-(null!==(a=null===(i=V[r])||void 0===i?void 0:i[1])&&void 0!==a?a:1),mt:2.5,backgroundImage:"var(--bitmap-url)",backgroundPositionX:function(t){return t.spacing(-s%95*13)},backgroundPositionY:function(t){return t.spacing(-15*Math.floor(s/95))},backgroundSize:function(t){return t.spacing(1235)},textShadow:"none",lineHeight:function(t){return t.spacing(11)},fontSize:function(t){return t.spacing(16)},overflow:"hidden"},"primary"!==c?{"::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"var(--dither-url)",backgroundSize:function(t){return t.spacing(1)},maskImage:"var(--bitmap-url)",maskPosition:function(t){return"".concat(t.spacing(-s%95*13)," ").concat(t.spacing(-15*Math.floor(s/95)))},maskSize:function(t){return t.spacing(1235)},mixBlendMode:"darken"}}:{}),children:r})},tt=function(t){var e=t.chars,n=t.sx,a=Object(g.a)(t,X);return e.length<=0?null:Object(K.jsx)(O.a,{component:"span",sx:n,children:Object(k.a)(Array(e.length).keys()).map((function(t){return Object(K.jsx)(Z,Object(m.a)({char:e[t]},a),t)}))})},et=["sm","md","lg"],nt=function(t){var e=t.size,n=void 0===e?"md":e,a=t.variant,i=void 0===a?"primary":a,r=t.uppercase,o=t.hasHover,s=t.children,u=Object(g.a)(t,J),d=p();return Object(K.jsx)(O.a,Object(m.a)(Object(m.a)({},u),{},{sx:Object(m.a)({display:"inline-block"},u.sx),children:Object(K.jsx)(l.a,{theme:L(Math.max(d+et.indexOf(n)-2,1)),children:c.Children.map(c.Children.toArray(s),(function(t){return"string"!==typeof t?t:Object(M.layoutItemsFromString)(t,(function(t){return t.length})).map((function(t,e){return"box"===t.type?Object(K.jsx)(tt,{chars:r?t.text.toUpperCase():t.text,variant:i,hasHover:o,sx:{display:"inline-block"}},e):"glue"===t.type?Object(K.jsx)(tt,{chars:r?t.text.toUpperCase():t.text,variant:i,hasHover:o},e):null}))}))})}))},at=["variant","disabled","children","onClick","sx"],it=function(t){var e=t.variant,n=void 0===e?"secondary":e,a=t.disabled,i=t.children,r=t.onClick,c=t.sx,o=":hover,:focus-visible",s=(c=void 0===c?{}:c)[o],u=void 0===s?{}:s,l=Object(g.a)(c,[o].map(v.a)),d=Object(g.a)(t,at);return Object(K.jsx)(O.a,Object(m.a)(Object(m.a)({component:"button",type:"button","data-text":"".concat(i),onClick:a?void 0:r},d),{},{sx:Object(m.a)(Object(m.a)({flexShrink:0,border:"none",m:0,py:2,background:"none"},a?{}:Object(m.a)({":hover::before,:focus-visible::before":{content:'""',display:"inline-block",backgroundImage:"url(".concat(x,")"),backgroundSize:"contain",width:function(t){return t.spacing(7.5)},height:function(t){return t.spacing(7.5)},ml:-9.5,mr:2}},Q(n,Object(m.a)(Object(m.a)({},u),{},{outline:"none",animation:F})))),l),children:Object(K.jsx)(nt,{component:"span",variant:a?"disabled":n,hasHover:!a,children:i})}))},rt=n(153),ct=["children","sx"],ot=function(t){var e=t.children,n=t.sx,a=Object(g.a)(t,ct);return Object(K.jsx)(rt.a,Object(m.a)(Object(m.a)({},a),{},{sx:Object(m.a)({display:"flex",alignItems:"baseline",gap:4,py:3,px:4},n),children:e}))},st=n(32),ut=n.n(st),lt=n(46),dt=n(47),bt=n.n(dt),pt=n(16),ht=n(78),jt=function(t){var e=t.id,n=t.label,a=t.helperText,i=t.required,r=t.disabled,c=t.acceptFileTypes,o=Object(pt.b)(e,{subscription:{value:!0,error:!0,submitError:!0,touched:!0},type:"file",parse:function(t){return t}}),s=o.input,u=s.value,l=s.onChange,d=o.meta,b=Object(ht.a)({onDrop:function(t){return l(null===t||void 0===t?void 0:t[0])},maxFiles:1}),p=b.getRootProps,h=b.getInputProps,j=b.isDragActive;return Object(K.jsxs)(O.a,Object(m.a)(Object(m.a)({},p({onClick:function(t){return t.stopPropagation()}})),{},{sx:{display:"flex",flexDirection:"column",border:function(t){return"".concat(t.spacing(1)," dashed ").concat(t.palette.primary.main,"99")},p:4},children:[Object(K.jsxs)(O.a,{sx:{display:"flex",gap:4,alignItems:"baseline"},children:[Object(K.jsx)(it,{component:"label",htmlFor:e,disabled:r,children:n}),Object(K.jsx)("input",Object(m.a)(Object(m.a)({id:e},h()),{},{accept:c&&c.length>1?c.join(", "):null===c||void 0===c?void 0:c[0],required:i})),Object(K.jsx)(nt,{size:"sm",children:j?"Drop files here to upload":u?u.name:"No file selected"})]}),((d.error||d.submitError)&&d.touched||a)&&Object(K.jsx)(nt,{variant:"secondary",size:"sm",sx:{mt:1,textAlign:"center"},children:(d.error||d.submitError)&&d.touched?d.submitError||d.error:a})]}))},ft=function(){var t=Object(pt.c)().submit,e=Object(pt.d)({subscription:{pristine:!0,values:!0}}),n=e.pristine,a=e.values;return Object(c.useEffect)((function(){!n&&t()}),[a]),null},mt=n(148),gt=["initialValues","onSubmit","validate","children"],vt=function(t){var e=t.initialValues,n=t.onSubmit,a=t.validate,i=t.children,r=Object(g.a)(t,gt);return Object(K.jsx)(pt.a,{initialValues:e,onSubmit:n,validate:a,subscription:{active:!0,submitting:!0},render:function(t){var e=t.handleSubmit;return Object(K.jsx)(mt.a,Object(m.a)(Object(m.a)({component:"form",display:"flex",flexDirection:"column",onSubmit:e},r),{},{children:i}))}})},Ot=n(6),xt=n(76),yt=n(10),kt=yt.a.string().regex(/^-?\d+\.\d+$/).transform((function(t){return Number(t)})),wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.a.number();return t.transform((function(t){return t.toFixed(6)}))},_t=yt.a.string().regex(/^([0-9A-F]{24})+$/).transform((function(t){var e=function(t,e,n){return Object(k.a)(Array(t.length/e).keys()).map((function(t){return t*e})).map((function(n){return t.slice(n,n+e)})).map(n)}(t,24,(function(t){return t})),n=Object(xt.a)(e),a=n[0],i=n.slice(1),r=I(a.slice(4,10)),c=I(a.slice(12,18));return{width:r,height:c,data:i.reduce((function(t,e,n){var a=Math.floor(n/r),i=n%r;return I(e)?Object(m.a)(Object(m.a)({},t),{},Object(Ot.a)({},a,Object(m.a)(Object(m.a)({},t[a]),{},Object(Ot.a)({},i,e)))):t}),{})}})),St=yt.a.object({width:yt.a.number(),height:yt.a.number(),data:yt.a.record(yt.a.record(yt.a.string()))}).transform((function(t){return["5B02".concat(A(t.width,6),"00").concat(A(t.height,6),"000000")].concat(Object(k.a)(Object(k.a)(Array(t.width*t.height).keys()).map((function(e){var n,a;return null!==(n=null===(a=t.data[Math.floor(e/t.width)])||void 0===a?void 0:a[e%t.width])&&void 0!==n?n:A(0,24)})))).join("")})),Ct=yt.a.object({0:kt}).transform((function(t){return t[0]})),At=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt.a.number();return wt(t).transform((function(t){return{0:t}}))},It=yt.a.object({0:_t}).transform((function(t){return null===t||void 0===t?void 0:t[0]})),Ft=St.transform((function(t){return{0:t}})),Et=yt.a.record(kt).transform((function(t){return Object.values(t).reduceRight((function(t,e){return 0!==t.length||e?[e].concat(Object(k.a)(t)):[]}),[])})),Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt.a.number();return yt.a.array(wt(e)).transform((function(e){return Object(k.a)(Array(t).keys()).reduce((function(t,n){var a;return Object(m.a)(Object(m.a)({},t),{},Object(Ot.a)({},n,null!==(a=e[n])&&void 0!==a?a:Number(0).toFixed(6)))}),{})}))},Nt=yt.a.record(_t),zt=yt.a.record(St),Bt=yt.a.object({consumable_slot_count:Ct,consumables:Et,equip_gauntlet:Ct,hp_slot_count:Ct,inn_que_trigger:Et,inv_monster:Et,inv_quest:Et,lvlslot_auto:It.optional(),mapdun:Nt,mapwalked:Nt,npc_partsgiven:It.optional(),npc_triggers:It.optional(),save:yt.a.object({0:kt,1:kt,2:kt,3:kt,fisher:kt,fisher_price:kt,plus:kt}),shop_gauntlet:Et,shop_monster:Et,shop_potion_recipe:Et,shop_potions:Et,shop_special:Et,special_inv:Et,specialatk_slot_count:Ct,specialcharge_slot_count:Ct,triggers:It.optional()}).strict(),Mt=yt.a.object({consumable_slot_count:At(yt.a.number().max(8)),consumables:Gt(7),equip_gauntlet:At(),hp_slot_count:At(),inn_que_trigger:Gt(),inv_monster:Gt(),inv_quest:Gt(),lvlslot_auto:Ft.optional(),mapdun:zt,mapwalked:zt,npc_partsgiven:Ft.optional(),npc_triggers:Ft.optional(),save:yt.a.object({0:wt(),1:wt(),2:wt(),3:wt(),fisher:wt(),fisher_price:wt(),plus:wt()}),shop_gauntlet:Gt(),shop_monster:Gt(),shop_potion_recipe:Gt(),shop_potions:Gt(),shop_special:Gt(),special_inv:Gt(7),specialatk_slot_count:At(),specialcharge_slot_count:At(),triggers:Ft.optional()}).strict(),Tt={consumable_slot_count:2,consumables:[],equip_gauntlet:0,hp_slot_count:5,inn_que_trigger:[],inv_monster:[],inv_quest:[],mapdun:{0:{width:100,height:100,data:{}}},mapwalked:{0:{width:100,height:100,data:{}}},save:{0:0,1:0,2:0,3:0,fisher:0,fisher_price:0,plus:0},shop_gauntlet:[],shop_monster:[],shop_potion_recipe:[],shop_potions:[],shop_special:[1],special_inv:[0,-1,-1,-1,-1,-1,-1,-1],specialatk_slot_count:3,specialcharge_slot_count:3},Ht=n(56),Rt=["img","width","height","size","sx"],Dt=["img","width","height","sx"],Wt=function(t){var e=t.img,n=t.width,a=t.height,i=t.sx,r=Object(g.a)(t,Dt);return Object(K.jsx)(O.a,Object(m.a)(Object(m.a)({},r),{},{width:"number"===typeof n?function(t){return t.spacing(n)}:n,height:"number"===typeof a?function(t){return t.spacing(a)}:a,sx:Object(m.a)({background:e?"url(".concat(e,")"):void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},i)}))},qt=function(t){var e,n,a,i=t.img,r=t.width,o=t.height,s=t.size,l=void 0===s?1:s,d=t.sx,b=Object(g.a)(t,Rt),p=Object(Ht.a)(),h=Number(null!==(e=null===(n=p.spacing(1).match(/(\d+)/))||void 0===n?void 0:n[1])&&void 0!==e?e:1),j=Object(c.useRef)(),f=Object(c.useState)(!1),v=Object(u.a)(f,2),x=v[0],y=v[1],k=Object(c.useState)(),w=Object(u.a)(k,2),_=w[0],S=w[1],C=r||o?r:null===_||void 0===_?void 0:_[0],A=r||o?o:null===_||void 0===_?void 0:_[1];return Object(c.useEffect)((function(){return y(!1)}),[i]),i?Object(K.jsx)(O.a,Object(m.a)(Object(m.a)({ref:j,component:"img",src:i},b),{},{style:Object(m.a)(Object(m.a)({},null!==(a=b.style)&&void 0!==a?a:{}),x?{width:C?C*h*l:void 0,height:A?A*h*l:void 0}:void 0),onLoad:function(){var t,e,n,a;x||(y(!0),S([null!==(t=null===(e=j.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,null!==(n=null===(a=j.current)||void 0===a?void 0:a.clientHeight)&&void 0!==n?n:0]))},sx:Object(m.a)(Object(m.a)({},d),{},{visibility:_?"visible":"hidden",objectFit:"contain"})})):null},Ut=function(){return Object(K.jsx)(qt,{img:"".concat("/FightKnightEdit","/assets/logo-512.png"),height:140,sx:{aspectRatio:"1",my:-26,mb:-26}})},Pt=function(t){var e=t.setWorldData;return Object(K.jsxs)(vt,{initialValues:{file:void 0},onSubmit:function(){var t=Object(lt.a)(ut.a.mark((function t(n){var a,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.file,t.prev=1,t.t0=bt.a,t.t1=atob,t.next=6,S(a);case 6:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),i=t.t0.parse.call(t.t0,t.t3),e([a.name,Bt.parse(i)]),t.next=16;break;case 12:return t.prev=12,t.t4=t.catch(1),console.error(t.t4),t.abrupt("return",{file:"Failed to parse file"});case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),validate:function(t){var e=t.file;return e?e.name.endsWith(".sav")?void 0:{file:"Wrong file type"}:{file:"Required"}},sx:{maxWidth:function(t){return t.breakpoints.values.lg},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",alignSelf:"center",flexGrow:1,gap:10,px:4},children:[Object(K.jsx)(Ut,{}),Object(K.jsxs)(nt,{textAlign:"center",children:["Start by locating your save files in"," ",Object(K.jsxs)(nt,{component:"span",variant:"success",children:["C:\\Users\\","{{USER_NAME}}","\\AppData\\Local\\FIGHTKNIGHT\\",Object(K.jsx)(nt,{component:"span",children:"."})]})," ","Then pick a slot from one of the"," ",Object(K.jsx)(nt,{component:"span",variant:"success",children:"FIGHTKNIGHT_save_X"})," ","folders and select"," ",Object(K.jsx)(nt,{component:"span",variant:"success",children:"save_gamestate.sav"})," ","file."]}),Object(K.jsx)(it,{onClick:function(){return e(["save_gamestate.sav",Tt])},children:"New game"}),Object(K.jsx)(jt,{id:"file",label:"Load game",acceptFileTypes:[".sav"]}),Object(K.jsx)(ft,{})]})},Lt=function(t){var e=t.name,n=t.goBack;return Object(K.jsxs)(ot,{children:[Object(K.jsx)(nt,{flexGrow:1,children:e}),Object(K.jsx)(it,{onClick:n,children:"Back"})]})},Kt=function(t){var e=Object(pt.b)(t,{subscription:{value:!0}}).input,n=e.value,a=e.onChange;return[n,function(t){return a({target:{value:t}})}]},Xt=(r={},Object(Ot.a)(r,0,"Creston"),Object(Ot.a)(r,5,"Tower Staircase"),Object(Ot.a)(r,7,"Upper Tower Staircase"),Object(Ot.a)(r,9,"Aquatic Aqueduct Dungeons"),Object(Ot.a)(r,10,"Aquatic Aqueduct"),Object(Ot.a)(r,15,"Desolate Desert Tombs"),Object(Ot.a)(r,16,"Desolate Desert"),Object(Ot.a)(r,21,"Scrapyard Swamp"),Object(Ot.a)(r,22,"Scrapyard Swamp Treetops"),Object(Ot.a)(r,23,"Graveyard Grove Tunnels"),Object(Ot.a)(r,25,"Chaotic Colosseum"),Object(Ot.a)(r,26,"Graveyard Grove Tunnels"),Object(Ot.a)(r,27,"Graveyard Grove Tunnels"),Object(Ot.a)(r,28,"Graveyard Grove Tunnels"),Object(Ot.a)(r,29,"Graveyard Grove Crypt"),Object(Ot.a)(r,30,"Graveyard Grove"),Object(Ot.a)(r,35,"Ascendant Archive"),Object(Ot.a)(r,36,"Ascendant Archive Memory"),Object(Ot.a)(r,37,"Archive Memory 1"),Object(Ot.a)(r,38,"Archive Memory 2"),Object(Ot.a)(r,39,"Archive Memory 3"),Object(Ot.a)(r,40,"Archive Memory 4"),Object(Ot.a)(r,41,"Archive Memory 5"),Object(Ot.a)(r,42,"Archive Memory 6"),Object(Ot.a)(r,43,"Archive Memory 7"),r),Jt=n.p+"static/media/sButton_primary.fb07582c.png",Vt=n.p+"static/media/sButtonHover_primary.1f8605b7.png",Yt=n.p+"static/media/sButton_secondary.78a90add.png",$t=n.p+"static/media/sButtonHover_secondary.15332855.png",Qt=n.p+"static/media/sButton_disabled.bfe7548b.png",Zt=n.p+"static/media/sButtonHover_disabled.4b14c3fa.png",te=["variant","disabled","children","onClick","sx"],ee={primary:Jt,secondary:Yt,disabled:Qt},ne={primary:Vt,secondary:$t,disabled:Zt},ae=function(t){var e=t.variant,n=void 0===e?"secondary":e,a=t.disabled,i=t.children,r=t.onClick,c=t.sx,o=":hover,:focus-visible",s=(c=void 0===c?{}:c)[o],u=void 0===s?{}:s,l=Object(g.a)(c,[o].map(v.a)),d=Object(g.a)(t,te);return Object(K.jsx)(Wt,Object(m.a)(Object(m.a)({component:"button",type:"button",img:ee[n],"data-text":"".concat(i),onClick:a?void 0:r},d),{},{sx:Object(m.a)(Object(m.a)(Object(m.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:"none",m:0,py:2,width:function(t){return t.spacing(96)},height:function(t){return t.spacing(16)}},N),a?{}:Q(n,Object(m.a)(Object(m.a)({},u),{},{outline:"none",animation:G,backgroundImage:"url(".concat(ne[n],") "),width:function(t){return t.spacing(120)},height:function(t){return t.spacing(20)},px:function(t){return t.spacing(12)},py:function(t){return t.spacing(2)},mx:function(t){return t.spacing(-12)},my:function(t){return t.spacing(-2)},zIndex:1}))),l),children:Object(K.jsx)(nt,{component:"span",variant:a?"disabled":n,hasHover:!a,uppercase:!0,sx:{mt:-2},children:i})}))},ie=n(150),re=n.p+"static/media/sBackButton.829f4698.png",ce=n.p+"static/media/sBackButtonHover.0592d59c.png",oe=["disabled","onClick","sx"],se=function(t){var e=t.disabled,n=t.onClick,a=t.sx,i=":hover,:focus-visible",r=(a=void 0===a?{}:a)[i],c=void 0===r?{}:r,o=Object(g.a)(a,[i].map(v.a)),s=Object(g.a)(t,oe);return Object(K.jsx)(Wt,Object(m.a)(Object(m.a)({component:"button",type:"button",img:re,"data-text":"Back",onClick:e?void 0:n},s),{},{sx:Object(m.a)(Object(m.a)(Object(m.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:"none",m:0,py:2,width:function(t){return t.spacing(48)},height:function(t){return t.spacing(16)}},N),e?{}:Q("secondary",Object(m.a)(Object(m.a)({},c),{},{outline:"none",animation:G,backgroundImage:"url(".concat(ce,") "),width:function(t){return t.spacing(60)},height:function(t){return t.spacing(20)},mx:function(t){return t.spacing(-6)},my:function(t){return t.spacing(-1)}}))),o),children:Object(K.jsx)(nt,{component:"span",variant:e?"disabled":"secondary",hasHover:!e,sx:{mt:-2},children:"BACK"})}))},ue=["button","children","sx"],le=function(t){var e=t.button,n=t.children,a=t.sx,i=Object(g.a)(t,ue),r=Object(c.useState)(!1),o=Object(u.a)(r,2),s=o[0],l=o[1],d=function(){return l(!1)};return Object(K.jsxs)(K.Fragment,{children:[e((function(){return l(!0)})),Object(K.jsx)(ie.a,{open:s,onClose:d,children:Object(K.jsxs)(O.a,Object(m.a)(Object(m.a)({},i),{},{sx:Object(m.a)(Object(m.a)({},a),{},{position:"absolute",top:"50%",left:function(t){return t.spacing(3)},transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"flex-start",flexWrap:"wrap",maxHeight:"95vh",gap:3}),children:[n(d),Object(K.jsx)(se,{onClick:function(){return l(!1)},sx:{mt:2}})]}))})]})},de=function(){var t,e=Object(c.useState)(0),n=Object(u.a)(e,2),a=n[0],i=n[1],r=Kt("mapdun.".concat(a)),o=Object(u.a)(r,1)[0],s=Kt("mapwalked.".concat(a)),l=Object(u.a)(s,1)[0],d=Object.keys(Kt("mapdun")[0]).map((function(t){return Number(t)}));return Object(K.jsxs)(O.a,{sx:{position:"relative",height:0,flexGrow:1,overflow:"auto"},children:[Object(K.jsxs)(O.a,{sx:{position:"sticky",top:0,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",zIndex:2,px:2,py:3},children:[Object(K.jsx)(nt,{size:"lg",children:null!==(t=Xt[a])&&void 0!==t?t:"Unknown #".concat(a)}),Object(K.jsx)(le,{button:function(t){return Object(K.jsx)(it,{onClick:t,children:"Change"})},children:function(t){return d.map((function(e){var n;return Object(K.jsx)(ae,{variant:e===a?"primary":void 0,onClick:function(){e!==a&&i(e),t()},children:null!==(n=Xt[e])&&void 0!==n?n:"Unknown #".concat(e)},e)}))}})]}),Object(K.jsx)(O.a,{sx:{display:"grid",gridTemplateRows:function(t){return"repeat(".concat(o.height,", ").concat(t.spacing(4),")")},gridTemplateColumns:function(t){return"repeat(".concat(o.width,", ").concat(t.spacing(4),")")}},children:Object(k.a)(Array(o.width).keys()).map((function(t){return Object(k.a)(Array(o.height).keys()).map((function(e){var n,a,i=null===(n=o.data[Number(t)])||void 0===n?void 0:n[Number(e)],r=null===(a=l.data[Number(t)])||void 0===a?void 0:a[Number(e)];if(!r&&!i)return null;var c=r?function(t){var e=z.findIndex((function(e){return t>=e[0]&&t<e[1]}));return-1===e||0===e?void 0:e-1}(I(r.slice(-4,-2))):void 0,s=void 0!==c?Object(K.jsx)(qt,{img:"".concat("/FightKnightEdit","/assets/sprites/sMap_cell_big_").concat(c,".png"),style:{gridColumnStart:t,gridRowStart:e},sx:{zIndex:1}}):null;return i?Object(K.jsxs)(Wt,{img:"".concat("/FightKnightEdit","/assets/sprites/sMap_cell_").concat(B(I(i.slice(-4,-2))),".png"),onClick:function(){return console.log({x:t,y:e,v:i,w:r})},style:{gridColumnStart:t,gridRowStart:e},sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[s,Object(K.jsx)(O.a,{sx:{position:"absolute",bottom:0,right:0,width:function(t){return t.spacing(r?1:4)},height:function(t){return t.spacing(r?1:4)},backgroundImage:"url(".concat(q,")"),mixBlendMode:"darken"}})]},"".concat(t,"-").concat(e)):s}))}))})]})},be=n(77),pe=n.n(be),he=(n(120),n(121),n(122),function(){var t=Object(pt.d)({subscription:{values:!0}}).values,e=Object(pt.c)().reset,n=Object(c.useState)(JSON.stringify(t,null,2)),a=Object(u.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)(!1),s=Object(u.a)(o,2),l=s[0],d=s[1],b=Object(c.useState)(),p=Object(u.a)(b,2),h=p[0],j=p[1],f=Object(c.useState)(),m=Object(u.a)(f,2),g=m[0],v=m[1];return Object(c.useEffect)((function(){r(JSON.stringify(t,null,2))}),[t]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(O.a,{sx:{height:0,flexGrow:1,"*":{fontFamily:"monospace"}},children:Object(K.jsx)(pe.a,{mode:"json",theme:"github",value:i,onChange:function(t){l&&d(!1),r(t)},showGutter:!0,highlightActiveLine:!0,width:"100%",height:"100%",markers:g})}),Object(K.jsxs)(ot,{sx:{justifyContent:"flex-end"},children:[h?Object(K.jsx)(nt,{size:"sm",children:h}):l&&Object(K.jsx)(nt,{size:"sm",children:"Changes saved"}),Object(K.jsx)(it,{variant:"success",disabled:l,onClick:function(){try{j(void 0),v([]),e(JSON.parse(i)),d(!0)}catch(s){var t,n;if(!(s instanceof SyntaxError))return;j(s.message);var a=Number(null!==(t=null===(n=s.message.match(/position (\d+)/))||void 0===n?void 0:n[1])&&void 0!==t?t:-1);if(a<0)return;var r=i.slice(0,a).split("\n"),c=r.length-1,o=r[r.length-1].length;console.log({position:a,row:c,col:o}),j("".concat(s.message," (line: ").concat(c+1,")")),v([{type:"text",className:"error-marker",startRow:c,endRow:c,startCol:o,endCol:o+1},{type:"fullLine",className:"error-marker",startRow:c,endRow:c,startCol:o,endCol:o+1}])}},children:"Save changes"})]})]})}),je=[{name:"World map",component:Object(K.jsx)(de,{})},{name:"Edit JSON",component:Object(K.jsx)(he,{})}],fe=function(t){var e=Object(u.a)(t.save,2),n=e[0],a=e[1],i=t.reset,r=Object(c.useState)(),o=Object(u.a)(r,2),s=o[0],l=o[1],d=je.find((function(t){return t.name===s}));return Object(c.useEffect)((function(){return document.title="".concat(n," | Archvale Save Edit"),function(){document.title="Archvale Save Edit"}}),[n]),Object(K.jsx)(vt,{initialValues:a,onSubmit:function(){var t=Object(lt.a)(ut.a.mark((function t(e){var a,i,r;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=bt.a.stringify(Mt.parse(e)),i="data:application/octet-stream;base64,".concat(btoa(a)),t.next=4,fetch(i).then((function(t){return t.blob()}));case 4:r=t.sent,C(r,n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),sx:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:d?void 0:"center"},children:d?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Lt,{name:d.name,goBack:function(){return l(void 0)}}),d.component]}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Ut,{}),je.map((function(t){return Object(K.jsx)(it,{onClick:function(){return l(t.name)},children:t.name},t.name)})),Object(K.jsx)(it,{type:"submit",variant:"success",children:"Save"}),Object(K.jsx)(it,{onClick:i,children:"Quit"})]})})},me=function(){var t=Object(c.useState)(),e=Object(u.a)(t,2),n=e[0],a=e[1],i=p(),r=Object(c.useState)(),o=Object(u.a)(r,2),s=o[0],b=o[1];Object(c.useEffect)((function(){!function(t){if("serviceWorker"in navigator){if(new URL("/FightKnightEdit",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/FightKnightEdit","/service-worker.js");h?(f(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):j(e,t)}))}}({onUpdate:function(t){b(t.waiting)}})}),[]);return Object(K.jsxs)(l.a,{theme:L(i),children:[Object(K.jsx)(d.a,{}),n?Object(K.jsx)(fe,{save:n,reset:function(){return a(void 0)}}):Object(K.jsx)(Pt,{setWorldData:a}),s&&Object(K.jsxs)(ot,{sx:{position:"absolute",bottom:0,width:"100vw"},children:[Object(K.jsx)(nt,{variant:"secondary",sx:{flexShrink:0},children:"!!!"}),Object(K.jsx)(nt,{size:"sm",flexGrow:1,children:"You are viewing outdated version of this app, please reload the page."}),Object(K.jsx)(it,{onClick:function(){null===s||void 0===s||s.postMessage({type:"SKIP_WAITING"}),window.location.reload()},children:"Reload"})]})]})};s.a.render(Object(K.jsx)(c.StrictMode,{children:Object(K.jsx)(me,{})}),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.bf7b985e.chunk.js.map